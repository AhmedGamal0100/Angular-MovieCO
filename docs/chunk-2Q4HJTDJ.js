import{a as re,b as ne,c as oe}from"./chunk-U4KOMUCL.js";import{a as te}from"./chunk-GJ53IATJ.js";import{a as ee,b as ie}from"./chunk-EUJZH6SC.js";import{a as W,b as Y}from"./chunk-AO6HBYHW.js";import{A as J,B as K,C as X,b as B,c as m,e as D,f as j,g as P,i as _,k as z,l as U,m as Z,n as L,o as Q,r as H,t as $}from"./chunk-QRBZLDK2.js";import{S as F}from"./chunk-YTIKMBIQ.js";import{e as N,i as V,r as q,s as I,v as G}from"./chunk-TF7VQGRQ.js";import"./chunk-F2X3VGZZ.js";import{$ as C,Bb as h,Cb as x,Hb as M,Ib as T,Jb as R,Na as u,Nb as s,U as w,Ub as O,Za as k,_ as f,db as d,dc as A,kb as a,na as S,pb as g,tb as o,ub as r,vb as p,zb as E}from"./chunk-ZYSLEO3A.js";var se=e=>{let n=e.get("password"),t=e.get("confirmPassword");return!n||!t||n.value===t.value?null:{passwordMismatch:!0}};var ae=["googleBtn"];function me(e,n){e&1&&(o(0,"p-message",14),s(1,"Name is required!"),r()),e&2&&a("styleClass"," m-auto")}function de(e,n){e&1&&(o(0,"p-message",14),s(1,"Email is required!"),r()),e&2&&a("styleClass"," m-auto")}function ue(e,n){e&1&&(o(0,"p-message",14),s(1,"Invalid email format!"),r()),e&2&&a("styleClass"," m-auto")}function pe(e,n){if(e&1&&d(0,de,2,1,"p-message",14)(1,ue,2,1,"p-message",14),e&2){let t,i=x();g((t=i.registerForm.get("email"))!=null&&t.getError("required")?0:(t=i.registerForm.get("email"))!=null&&t.getError("pattern")?1:-1)}}function ce(e,n){e&1&&(o(0,"p-message",14),s(1,"User name is required!"),r()),e&2&&a("styleClass"," m-auto")}function ge(e,n){e&1&&(o(0,"p-message",14),s(1,"User name mustn't contain spaces!"),r()),e&2&&a("styleClass"," m-auto")}function _e(e,n){if(e&1&&d(0,ce,2,1,"p-message",14)(1,ge,2,1,"p-message",14),e&2){let t,i=x();g((t=i.registerForm.get("userName"))!=null&&t.getError("required")?0:(t=i.registerForm.get("userName"))!=null&&t.getError("pattern")?1:-1)}}function fe(e,n){e&1&&(o(0,"p-message",14),s(1,"Password is required!"),r()),e&2&&a("styleClass"," m-auto")}function Ce(e,n){e&1&&(o(0,"p-message",14),s(1,"Password must contain at least 1 lowercase, 1 uppercase, 1 digit, special characters & minimum 8 characters!"),r()),e&2&&a("styleClass"," m-auto")}function he(e,n){if(e&1&&d(0,fe,2,1,"p-message",14)(1,Ce,2,1,"p-message",14),e&2){let t,i=x();g((t=i.registerForm.get("password"))!=null&&t.getError("required")?0:(t=i.registerForm.get("password"))!=null&&t.getError("pattern")?1:-1)}}function xe(e,n){e&1&&(o(0,"p-message",14),s(1,"Confirm password is required!"),r()),e&2&&a("styleClass"," m-auto")}function ve(e,n){if(e&1&&d(0,xe,2,1,"p-message",14),e&2){let t,i=x();g((t=i.registerForm.get("confirmPassword"))!=null&&t.getError("required")?0:-1)}}function we(e,n){e&1&&(o(0,"p-message",14),s(1,"Password doesn't match!"),r()),e&2&&a("styleClass"," m-auto")}function ye(e,n){e&1&&(o(0,"p-message",14),s(1,"Building field must be fill!"),r()),e&2&&a("styleClass"," m-auto")}function be(e,n){e&1&&(o(0,"p-message",14),s(1,"Street field must be fill!"),r()),e&2&&a("styleClass"," m-auto")}function Ee(e,n){e&1&&(o(0,"p-message",14),s(1,"Country field must be fill!"),r()),e&2&&a("styleClass"," m-auto")}function Fe(e,n){e&1&&(o(0,"p-message",14),s(1,"City field must be fill!"),r()),e&2&&a("styleClass"," m-auto")}function Pe(e,n){if(e&1){let t=E();o(0,"div",10)(1,"div",41)(2,"div",42),p(3,"input",43)(4,"input",44)(5,"input",45)(6,"input",46),r(),o(7,"button",47),h("click",function(){let l=f(t).index,c=x();return C(c.deleteAddress(l))}),s(8,"Delete"),r()(),d(9,ye,2,1,"p-message",14)(10,be,2,1,"p-message",14)(11,Ee,2,1,"p-message",14)(12,Fe,2,1,"p-message",14),r()}if(e&2){let t,i=n.index,l=x();u(),a("formGroupName",i),u(8),g((t=l.addresses.at(i).get("address"))!=null&&t.getError("required")&&((t=l.addresses.at(i).get("address"))!=null&&t.touched)?9:(t=l.addresses.at(i).get("street"))!=null&&t.getError("required")&&((t=l.addresses.at(i).get("street"))!=null&&t.touched)?10:(t=l.addresses.at(i).get("country"))!=null&&t.getError("required")&&((t=l.addresses.at(i).get("country"))!=null&&t.touched)?11:(t=l.addresses.at(i).get("city"))!=null&&t.getError("required")&&((t=l.addresses.at(i).get("city"))!=null&&t.touched)?12:-1)}}function Se(e,n){if(e&1){let t=E();o(0,"section",48)(1,"div",49),s(2," You have unsaved changes. Are you sure you want to leave this page? "),r(),o(3,"div",50)(4,"p-button",51),h("onClick",function(){f(t);let l=x();return C(l.onUserConfirmed())}),r(),o(5,"p-button",52),h("onClick",function(){f(t);let l=x();return C(l.onUserCancelled())}),r()()()}}var le=class e{googleBtn;_googleAuthService=w(te);messageService=w(F);_registerStore=w(ee);_router=w(q);canDeActivate=S(!1);visible=!1;registerForm;onUserConfirmed=()=>{};onUserCancelled=()=>{};ngOnInit(){this.registerForm=new P({name:new _("",[m.required]),email:new _("",[m.required,m.email,m.pattern("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+.[a-zA-Z]{2,}$")]),userName:new _("",[m.required,m.pattern("^[A-Za-z0-9]+$")]),password:new _("",[m.required,m.pattern("(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[*@%$#]).{8,}")]),confirmPassword:new _("",[m.required]),fullAddress:new H([this.createFormGroup()])},{validators:se})}ngDoCheck(){this.registerForm.touched&&!this.registerForm.valid&&this.canDeActivate.set(!0)}addAddress(){this.registerForm.controls.fullAddress.push(this.createFormGroup())}get addresses(){return this.registerForm.get("fullAddress")}deleteAddress(n){n>0&&this.addresses.removeAt(n)}createFormGroup(){return new P({address:new _("",[m.required]),street:new _("",[m.required]),country:new _("",[m.required]),city:new _("",[m.required])})}submit(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched();return}let n=this.registerForm.value,t=n.fullAddress[0]||{address:"",street:"",country:"",city:""},i={sub:"",email:n.email,name:n.userName,password:n.password,passConfirm:n.confirmPassword,picture:"",isPassGoogle:!1,given_name:n.name,family_name:"",lang:"en",address:t};this._registerStore.ifEmailExist(i.email)?this.showNotify("Error","This email is already exist!"):(this._registerStore.addToAccountsList(i),this._router.navigateByUrl("/login"))}clearForm(){this.registerForm.reset()}showConfirm(n){this.visible||(this.messageService.add({key:"confirm",sticky:!0,severity:"secondary",styleClass:"backdrop-blur-lg rounded-2xl"}),this.visible=!0,this.onUserConfirmed=()=>{this.onClose(),n(!0)},this.onUserCancelled=()=>{this.onClose(),n(!1)})}onClose(){this.visible=!1,this.messageService.clear("confirm")}showNotify(n,t){this.messageService.add({severity:"secondary",summary:n,detail:t})}ngAfterViewInit(){this._googleAuthService.InitiateGoogleAccount(this.googleBtn)}goHome(){this._router.navigate(["/home"])}ngOnDestroy(){window.scrollTo({top:0,behavior:"smooth"})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=k({type:e,selectors:[["app-register"]],viewQuery:function(t,i){if(t&1&&M(ae,7),t&2){let l;T(l=R())&&(i.googleBtn=l.first)}},features:[O([F])],decls:74,vars:9,consts:[["googleBtn",""],["headless",""],[1,"register"],[1,"register__bg"],[1,"register__container","flex","flex-column","gap-2"],[1,"register__home-btn",3,"click"],[1,"pi","pi-home"],[1,"register__title"],[1,"register__subtitle"],[1,"flex","flex-column","gap-2",3,"ngSubmit","formGroup"],[1,"flex","flex-column","gap-2"],[1,"flex","justify-content-center","align-items-center"],["for","name",1,"w-3","text-left"],["type","text","pInputText","","id","name","formControlName","name","placeholder","Name",1,"w-9"],["variant","outlined","severity","error",3,"styleClass"],["for","email",1,"w-3","text-left"],["type","email","pInputText","","id","email","formControlName","email","placeholder","Email@gmail.com",1,"w-9"],["for","user",1,"w-3","text-left"],["type","text","pInputText","","id","user","formControlName","userName","placeholder","User Name",1,"w-9"],["for","pass",1,"w-3","text-left"],["type","password","pInputText","","id","pass","formControlName","password","placeholder","Password",1,"w-9"],["for","confirmPass",1,"w-3","text-left"],["type","password","pInputText","","id","confirmPass","formControlName","confirmPassword","placeholder","Confirm Password",1,"w-9"],["formArrayName","fullAddress",1,"flex","flex-column","gap-2"],[1,"flex","justify-content-between","align-items-center"],[1,"w-3","text-left"],["pButton","","type","button",1,"w-6","font-bold",3,"click"],["class","flex flex-column gap-2",4,"ngFor","ngForOf"],[1,"buttons","flex","gap-2","w-10","m-auto"],["pButton","",1,"w-6","font-bold",3,"disabled"],[1,"social-logins"],["align","center","type","solid"],[1,"flex","justify-content-center","align-items-center","w-12","gap-5"],[1,"social-icons","w-5","flex","justify-content-center"],[1,"register__divider"],[1,"flex","justify-content-center","w-5"],[1,"login","font-medium"],["routerLink","/login",1,"text-red-500","font-bold","underline"],[1,"card","flex","justify-center","border-0"],["position","top-center","key","confirm",3,"onClose","baseZIndex"],[1,"card","flex","justify-center","gap-2"],[1,"flex","gap-2",3,"formGroupName"],[1,"w-10","flex","gap-1"],["type","text","pInputText","","placeholder","Building","id","address","formControlName","address",1,"w-3"],["type","text","pInputText","","placeholder","Street","id","street","formControlName","street",1,"w-3"],["type","text","pInputText","","placeholder","Country","id","country","formControlName","country",1,"w-3"],["type","text","pInputText","","placeholder","City","id","city","formControlName","city",1,"w-3"],["type","button","pButton","",1,"w-2","p-button-danger","font-bold","my-add-dark:border-0",3,"click"],[1,"flex","flex-column","p-4","gap-4","w-full","rounded-xl"],[1,"mb-3"],[1,"register__toast-btns","w-full","flex","gap-2","justify-content-center"],["severity","contrast","label","Confirm?","size","small",3,"onClick"],["severity","danger","label","Cancel","size","small",3,"onClick"]],template:function(t,i){if(t&1){let l=E();o(0,"div",2),p(1,"div",3),o(2,"div",4)(3,"button",5),h("click",function(){return f(l),C(i.goHome())}),p(4,"i",6),r(),o(5,"h1",7),s(6,"Register"),r(),o(7,"p",8),s(8,"Welcome with us!"),r(),o(9,"form",9),h("ngSubmit",function(){return f(l),C(i.submit())}),o(10,"div",10)(11,"div",11)(12,"label",12),s(13,"Name"),r(),p(14,"input",13),r(),d(15,me,2,1,"p-message",14),r(),o(16,"div",10)(17,"div",11)(18,"label",15),s(19,"Email"),r(),p(20,"input",16),r(),d(21,pe,2,1),r(),o(22,"div",10)(23,"div",11)(24,"label",17),s(25,"User Name"),r(),p(26,"input",18),r(),d(27,_e,2,1),r(),o(28,"div",10)(29,"div",11)(30,"label",19),s(31,"Password"),r(),p(32,"input",20),r(),d(33,he,2,1),r(),o(34,"div",10)(35,"div",11)(36,"label",21),s(37,"Confirm Password"),r(),p(38,"input",22),r(),d(39,ve,1,1)(40,we,2,1,"p-message",14),r(),o(41,"div",23)(42,"div",24)(43,"label",25),s(44,"Address"),r(),o(45,"button",26),h("click",function(){return f(l),C(i.addAddress())}),s(46,"Add new address"),r()(),d(47,Pe,13,2,"div",27),r(),o(48,"div",28)(49,"button",29),s(50,"Register"),r(),o(51,"button",26),h("click",function(){return f(l),C(i.clearForm())}),s(52,"Clear"),r()()(),o(53,"div",30)(54,"p-divider",31)(55,"b"),s(56,"Or"),r()(),o(57,"div",32)(58,"div",33),p(59,"div",null,0),r(),p(61,"div",34),o(62,"div",35)(63,"p",36),s(64,"Already have an account! "),o(65,"strong")(66,"a",37),s(67,"Login"),r()()()()()()()(),o(68,"div",38)(69,"p-toast",39),h("onClose",function(){return f(l),C(i.onClose())}),d(70,Se,6,0,"ng-template",null,1,A),r()(),o(72,"div",40),p(73,"p-toast"),r()}if(t&2){let l,c,y,b,v;u(9),a("formGroup",i.registerForm),u(6),g((l=i.registerForm.get("name"))!=null&&l.touched&&((l=i.registerForm.get("name"))!=null&&l.errors)?15:-1),u(6),g((c=i.registerForm.get("email"))!=null&&c.touched&&((c=i.registerForm.get("email"))!=null&&c.errors)?21:-1),u(6),g((y=i.registerForm.get("userName"))!=null&&y.touched&&((y=i.registerForm.get("userName"))!=null&&y.errors)?27:-1),u(6),g((b=i.registerForm.get("password"))!=null&&b.touched&&((b=i.registerForm.get("password"))!=null&&b.errors)?33:-1),u(6),g((v=i.registerForm.get("confirmPassword"))!=null&&v.touched&&((v=i.registerForm.get("confirmPassword"))!=null&&v.errors)?39:!((v=i.registerForm.get("confirmPassword"))!=null&&v.errors)&&(i.registerForm.errors!=null&&i.registerForm.errors.passwordMismatch)?40:-1),u(8),a("ngForOf",i.addresses.controls),u(2),a("disabled",!i.registerForm.valid),u(20),a("baseZIndex",5e3)}},dependencies:[V,N,$,z,B,D,j,U,Q,Z,L,G,I,ne,re,oe,ie,X,J,K,Y,W],styles:['[_nghost-%COMP%]{display:block;min-height:100vh;padding:2rem}[_nghost-%COMP%]   .register[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;min-height:100vh;display:flex;background-image:url("./media/login-background-T5QLPGHR.jpeg");background-size:cover;background-position:center;background-repeat:repeat-y}[_nghost-%COMP%]   .register__bg[_ngcontent-%COMP%]{z-index:0;position:absolute;background-color:#00000080;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);inset:0}[_nghost-%COMP%]   .register__container[_ngcontent-%COMP%]{z-index:1;max-width:800px;width:80%;margin:auto;padding:2rem 4rem;background-color:#f9f9f9;border-radius:12px;box-shadow:0 4px 12px #0000000d;text-align:center}html.my-add-dark   [_nghost-%COMP%]   .register__container[_ngcontent-%COMP%]{background-color:#fff;color:var(--p-surface-100)}[_nghost-%COMP%]   .register__title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:var(--p-red-500)}html.my-add-dark   [_nghost-%COMP%]   .register__title[_ngcontent-%COMP%]{color:var(--p-red-500)}[_nghost-%COMP%]   .register__subtitle[_ngcontent-%COMP%]{color:var(--p-surface-800);margin-bottom:1rem}html.my-add-dark   [_nghost-%COMP%]   .register__subtitle[_ngcontent-%COMP%]{color:var(--p-surface-500)}[_nghost-%COMP%]   .register__divider[_ngcontent-%COMP%]{background-color:var(--p-surface-300);height:2rem;width:1px}html.my-add-dark   [_nghost-%COMP%]   .register__divider[_ngcontent-%COMP%]{background:var(--p-surface-700)}[_nghost-%COMP%]   label[_ngcontent-%COMP%], [_nghost-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500}html.my-add-dark   [_nghost-%COMP%]   label[_ngcontent-%COMP%], html.my-add-dark   [_nghost-%COMP%]   p[_ngcontent-%COMP%]{color:var(--p-surface-800);font-weight:900}[_nghost-%COMP%]     .p-divider-content{padding-inline:1.25rem;border-radius:.4rem;border:1px solid #cecece}[_nghost-%COMP%]     .p-divider-content p{background-color:#f9f9f9}.register__home-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-left:.5rem;height:3rem;width:3rem;background-color:var(--p-surface-500);color:#fff;border-radius:50%;padding:.5rem 1rem;border:none;cursor:pointer}.register__home-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}.register__home-btn[_ngcontent-%COMP%]:hover{background-color:var(--p-surface-600)}']})};export{le as RegisterComponent};
