import{b as d}from"./chunk-3DSI2TTR.js";import{ia as t,ja as g,ka as f,la as b,ma as S}from"./chunk-YTIKMBIQ.js";import{n as m}from"./chunk-TF7VQGRQ.js";import{O as l,U as i,e as h,oc as u}from"./chunk-ZYSLEO3A.js";var n=class e{_http=i(m);headers={headers:{accept:"application/json",Authorization:d.TMDB_API_TOKEN}};getSearch(r="en-US",o,c=1,a="movie"){return this._http.get(`https://api.themoviedb.org/3/search/${a}?query=${o}&include_adult=false&language=${r}&page=${c}`,this.headers)}static \u0275fac=function(o){return new(o||e)};static \u0275prov=l({token:e,factory:e.\u0275fac,providedIn:"root"})};var p=new h,q=g({providedIn:"root"},S({lang:"en-US",page:1,query:"",type:"movie",searchRes:[],searchTotalResults:0}),b(e=>({setLanguage(r){t(e,{lang:r})},setQuery(r){t(e,{query:r,page:1})},setPage(r){t(e,{page:r})},setType(r){t(e,{type:r,page:1})}})),f({onInit(e){let r=i(n);u(()=>{let{lang:o,page:c,query:a,type:v}=e;if(a().trim()===""){t(e,{searchRes:[],searchTotalResults:0});return}p.unsubscribe(),p=r.getSearch(o(),a(),c(),v()).subscribe({next:s=>{t(e,{searchRes:s.results,searchTotalResults:s.total_results})},error:s=>console.error("Failed to load search results",s)})})},onDestroy(){p.unsubscribe()}}));export{q as a};
